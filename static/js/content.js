!function(e){function t(t){for(var r,o,c=t[0],p=t[1],u=t[2],s=0,d=[];s<c.length;s++)o=c[s],a[o]&&d.push(a[o][0]),a[o]=0;for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(e[r]=p[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var p=n[c];0!==a[p]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],p=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=p;i.push([102,1]),n()}({102:function(e,t,n){e.exports=n(304)},107:function(e,t,n){},269:function(e,t,n){},273:function(e,t,n){},294:function(e,t,n){},296:function(e,t,n){},302:function(e,t,n){},304:function(e,t,n){"use strict";n.r(t);var r=n(89),a=n(90),i=n(100),o=n(91),c=n(101),p=n(0),u=n.n(p),l=n(43),s=n.n(l),d=(n(107),n(6)),f=n(14),m=n(15),g=function(){return u.a.createElement("div",{className:"app-header"},u.a.createElement("img",{src:"/icon128.png"}))},h=n(93),b="TOGGLE_PREVIEW_MODE",v="SET_PREWVIEW_URL",w="COMMIT_MD_TEMP_TEXT",E="SET_MD_TEMP_TEXT",x="SET_ACCOUNT",y="SET_WAITING_TWEET",O="SET_WAITING_LOGIN",T="SHOW_POPUP",j="CLOSE_POPUP";function P(){return{type:b}}function C(e){return{type:v,url:e}}function S(){return{type:w}}function _(e){var t=e.isLogined,n=e.profileImage;return{type:x,isLogined:t,profileImage:n}}function k(e){return{type:y,value:e}}var N=Object(d.b)(function(e){return{previewMode:e.app.previewMode,previewUrl:e.app.previewUrl,initialText:e.app.mdText}},function(e){return{onChange:function(t){e({type:E,text:t})}}})(function(e){var t=e.initialText,n=e.previewMode,r=e.previewUrl,a=e.onChange;return n?u.a.createElement("div",{className:"preview"},r?u.a.createElement("img",{className:"preview-img",src:r}):u.a.createElement("div",{className:"preview-loading"},u.a.createElement("div",{className:"lds-ellipsis"},u.a.createElement("div",null),u.a.createElement("div",null),u.a.createElement("div",null),u.a.createElement("div",null)))):u.a.createElement("div",null,u.a.createElement(h.UnControlled,{value:t,options:{mode:"gfm",theme:"github-light",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!1,tabSize:2},editorDidMount:function(e){e.setOption("extraKeys",{Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)}})},onChange:function(e,t,n){return a(n)}}))}),L=n(4),M=n.n(L),I=n(16),W="ASYNC_ACTION",U=n(94),B=n.n(U),A=n(46),D=n.n(A),H=n(95),R=n.n(H),V=n(96),G=n.n(V),z=n(97),X=n.n(z),F=n(98),J=n.n(F),K=n(47),Y=n.n(K),q={isProd:!0,isBrowser:void 0,apiUrl:"https://twitter-md.herokuapp.com"},Q=R()({html:!0,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight:function(e,t){if(t&&Y.a.getLanguage(t))try{return Y.a.highlight(t,e).value}catch(n){}return""}});function Z(e,t){var n=Q.render(e),r=(new DOMParser).parseFromString(n,"text/html").body.childNodes,a=document.createElement("div");a.setAttribute("class","markdown-body"),r.forEach(function(e){a.append(e)});var i=document.createElement("div");i.setAttribute("style","position: fixed; left: -100%; width: 600px;"),i.appendChild(a),document.body.appendChild(i),J()(a,{proxy:"".concat(q.apiUrl,"/corsProxy"),useCORS:!0,scale:1.3,logging:!1}).then(function(e){t(e),i.remove()})}Q.use(G.a).use(X.a);var $=n(99),ee=n.n($),te={box:Object(m.css)({width:"100px",height:"auto",paddingTop:"4px",paddingBottom:"4px",background:"white",borderRadius:"4px",border:"1px solid #e6ecf0",boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"}),ul:Object(m.css)({padding:"0px",marginTop:"4px",marginBottom:"4px"}),li:Object(m.css)({listStyle:"none",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",":hover":{background:"rgba(240, 240, 240, 1.0)"}})},ne=Object(d.b)(function(e){return{popupComponent:e.app.popupComponent,isPopupShown:e.app.isPopupShown}},function(e){return{closePopup:function(){e({type:j})},logout:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(q.apiUrl,"/logout"),chrome&&chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank"),t.dispatch(_({isLogined:!1})),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){return u.a.createElement(ee.a,{onClickOutside:function(){return e.closePopup()}},u.a.createElement("div",{className:te.box},u.a.createElement("ul",{className:te.ul},u.a.createElement("li",{className:te.li,onClick:function(){return e.logout()}},"Logout"))))}),re=Object(d.b)(function(e){return{isWaitingTweet:e.app.isWaitingTweet,isWaitingLogin:e.app.isWaitingLogin,isValid:e.app.isValid,previewMode:e.app.previewMode,isLogined:e.app.isLogined,profileImage:e.app.profileImage}},function(e){return{showPopup:function(){var t;e((t=u.a.createElement("div",{style:{position:"fixed",right:"8px",bottom:"50px",zIndex:"100000"}},u.a.createElement(ne,null)),{type:T,popupComponent:t}))},tweet:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch(k(!0)),t.dispatch(S()),Z(t.getState().app.mdText,function(e){e.toBlob(function(e){var n=new FormData;n.append("title","#TwitterMD"),n.append("image",e),D.a.post("".concat(q.apiUrl,"/tweet"),n,{headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then(function(e){e.data.ok?f.toast.info("Tweeted!"):f.toast.error("Woops! Error!"),t.dispatch(k(!1))}).catch(function(e){f.toast.error("Woops! Error!"),t.dispatch(k(!1))})})}),e.abrupt("return",r(n));case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},togglePreview:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dispatch(S()),!(a=t.getState()).app.previewMode){e.next=6;break}return t.dispatch(P()),t.dispatch(C("")),e.abrupt("return",r(n));case 6:return t.dispatch(P()),Z(a.app.mdText,function(e){e.toBlob(function(e){t.getState().app.previewMode&&t.dispatch(C(URL.createObjectURL(e)))})}),e.abrupt("return",r(n));case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},savePNG:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch(S()),Z(t.getState().app.mdText,function(e){e.toBlob(function(e){B()(e,"download")})}),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},login:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.isBrowser&&!q.isProd&&t.dispatch(_({isLogined:!0,profileImage:"/icon128.png"})),a="".concat(q.apiUrl,"/auth/twitter"),chrome&&chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank"),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){var t=e.previewMode,n=e.isLogined,r=e.isValid,a=e.isWaitingTweet,i=e.isWaitingLogin,o=e.profileImage,c=e.togglePreview,p=e.savePNG,l=e.tweet,s=e.login,d=e.showPopup;return u.a.createElement("div",{className:"app-footer"},u.a.createElement("button",{className:"btn "+(t?"":"btn-outline"),onClick:function(){return c()}},"Preview"),u.a.createElement("div",{className:"flex-pad"}),u.a.createElement("button",{className:"btn ".concat(r?"":"btn-disabled"),onClick:function(){return p()},disabled:!r},"Save as"),n?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"btn ".concat(r?"":"btn-disabled"," ").concat(a?"btn-wait":""),onClick:function(){return l()},disabled:!r||a},a?"Tweeting":"Tweet"),u.a.createElement("img",{className:"profile-image",src:o,onClick:function(){return d()}})):u.a.createElement("button",{className:"btn",onClick:function(){return!i&&s()}},i?"Checking":"Login"))}),ae=Object(d.b)(function(e){return{popupComponent:e.app.popupComponent,isPopupShown:e.app.isPopupShown}},function(e){return{}})(function(e){return e.isPopupShown?u.a.createElement("div",null,e.popupComponent):u.a.createElement("div",null)}),ie=(n(269),n(271),n(273),n(86),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(292),n(294),n(296),n(298),n(300),n(302),Object(d.b)(function(e){return{}},function(e){return{checkLogined:function(){e({type:W,asyncHandler:function(){var e=Object(I.a)(M.a.mark(function e(t,n,r){var a,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("".concat(q.apiUrl,"/check"));case 3:a=e.sent,i=a.data,t.dispatch(_({isLogined:i.logined,profileImage:i.profileImage})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f.toast.error("Woops! Error!");case 11:return t.dispatch({type:O,value:!1}),e.abrupt("return",r(n));case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){return e.checkLogined(),u.a.createElement("div",{className:"app"},u.a.createElement(g,null),u.a.createElement(N,null),u.a.createElement(re,null),u.a.createElement(f.ToastContainer,{closeButton:!1,className:Object(m.css)({width:"120px !important"}),toastClassName:Object(m.css)({fontSize:"14px",textAlign:"center",width:"120px",height:"35px",minHeight:"35px !important"}),autoClose:3e3,hideProgressBar:!0}),u.a.createElement(ae,null))})),oe=n(11),ce=n(7),pe=function(e){return e.length>0},ue={previewMode:!1,previewUrl:"",mdText:"# Title",mdTempText:"# Title",isValid:pe("# Title"),isWaitingTweet:!1,isWaitingLogin:!0,isLogined:!1,profileImage:"",popupComponent:null,isPopupShown:!1};var le=Object(oe.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n=e.previewMode;return Object(ce.a)({},e,{previewMode:!n});case v:return Object(ce.a)({},e,{previewUrl:t.url});case w:return Object(ce.a)({},e,{mdText:e.mdTempText});case E:return Object(ce.a)({},e,{mdTempText:t.text,isValid:pe(t.text)});case x:return Object(ce.a)({},e,{isLogined:t.isLogined,profileImage:t.profileImage});case y:return Object(ce.a)({},e,{isWaitingTweet:t.value});case O:return Object(ce.a)({},e,{isWaitingLogin:t.value});case T:return Object(ce.a)({},e,{isPopupShown:!0,popupComponent:t.popupComponent});case j:return Object(ce.a)({},e,{isPopupShown:!1,popupComponent:null});default:return e}}}),se=(q.isProd?void 0:window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)||oe.d,de=[function(e){return function(t){return function(n){return n.type===W?n.asyncHandler(e,n,t):t(n)}}}],fe=Object(oe.e)(le,se(oe.a.apply(void 0,de))),me=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return u.a.createElement(d.a,{store:fe},u.a.createElement(ie,null))}}]),t}(u.a.Component);s.a.render(u.a.createElement(me,null),document.getElementById("root"))}});
//# sourceMappingURL=content.js.map