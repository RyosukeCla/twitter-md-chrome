!function(e){function t(t){for(var r,i,c=t[0],p=t[1],u=t[2],l=0,d=[];l<c.length;l++)i=c[l],a[i]&&d.push(a[i][0]),a[i]=0;for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(e[r]=p[r]);for(s&&s(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var p=n[c];0!==a[p]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],p=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=p;o.push([102,1]),n()}({102:function(e,t,n){e.exports=n(302)},107:function(e,t,n){},269:function(e,t,n){},273:function(e,t,n){},294:function(e,t,n){},296:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r=n(89),a=n(90),o=n(100),i=n(91),c=n(101),p=n(0),u=n.n(p),s=n(43),l=n.n(s),d=(n(107),n(6)),f=n(14),m=n(15),g=function(){return u.a.createElement("div",{className:"app-header"},u.a.createElement("img",{src:"/icon128.png"}))},h=n(93),b="TOGGLE_PREVIEW_MODE",v="SET_PREWVIEW_URL",w="COMMIT_MD_TEMP_TEXT",x="SET_MD_TEMP_TEXT",y="SET_ACCOUNT",O="SET_WAITING_TWEET",E="SET_WAITING_LOGIN",T="SHOW_POPUP",j="CLOSE_POPUP";function P(){return{type:b}}function C(){return{type:w}}function S(e){var t=e.isLogined,n=e.profileImage;return{type:y,isLogined:t,profileImage:n}}function _(e){return{type:O,value:e}}var k=Object(d.b)(function(e){return{previewMode:e.app.previewMode,previewUrl:e.app.previewUrl,initialText:e.app.mdText}},function(e){return{onChange:function(t){e({type:x,text:t})}}})(function(e){var t=e.initialText,n=e.previewMode,r=e.previewUrl,a=e.onChange;return n?u.a.createElement("div",{className:"preview"},u.a.createElement("img",{className:"preview-img",src:r})):u.a.createElement("div",null,u.a.createElement(h.UnControlled,{value:t,options:{mode:"gfm",theme:"github-light",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!1,tabSize:2},editorDidMount:function(e){e.setOption("extraKeys",{Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)}})},onChange:function(e,t,n){return a(n)}}))}),L=n(4),N=n.n(L),M=n(16),W="ASYNC_ACTION",I=n(94),U=n.n(I),B=n(46),A=n.n(B),D=n(95),H=n.n(D),R=n(96),V=n.n(R),G=n(97),X=n.n(G),z=n(98),F=n.n(z),J=n(47),K=n.n(J),Y={isProd:!0,isBrowser:void 0,apiUrl:"https://twitter-md.herokuapp.com"},q=H()({html:!0,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight:function(e,t){if(t&&K.a.getLanguage(t))try{return K.a.highlight(t,e).value}catch(n){}return""}});function Q(e,t){var n=q.render(e),r=(new DOMParser).parseFromString(n,"text/html").body.childNodes,a=document.createElement("div");a.setAttribute("class","markdown-body"),r.forEach(function(e){a.append(e)});var o=document.createElement("div");o.setAttribute("style","position: fixed; left: -100%; width: 600px;"),o.appendChild(a),document.body.appendChild(o),F()(a,{proxy:"".concat(Y.apiUrl,"/corsProxy"),useCORS:!0,scale:1.3,logging:!1}).then(function(e){t(e),o.remove()})}q.use(V.a).use(X.a);var Z=n(99),$=n.n(Z),ee={box:Object(m.css)({width:"100px",height:"auto",paddingTop:"4px",paddingBottom:"4px",background:"white",borderRadius:"4px",border:"1px solid #e6ecf0",boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"}),ul:Object(m.css)({padding:"0px",marginTop:"4px",marginBottom:"4px"}),li:Object(m.css)({listStyle:"none",padding:"4px 8px",cursor:"pointer",fontSize:"12px",fontWeight:"bold",":hover":{background:"rgba(240, 240, 240, 1.0)"}})},te=Object(d.b)(function(e){return{popupComponent:e.app.popupComponent,isPopupShown:e.app.isPopupShown}},function(e){return{closePopup:function(){e({type:j})},logout:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Y.apiUrl,"/logout"),chrome&&chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank"),t.dispatch(S({isLogined:!1})),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){return u.a.createElement($.a,{onClickOutside:function(){return e.closePopup()}},u.a.createElement("div",{className:ee.box},u.a.createElement("ul",{className:ee.ul},u.a.createElement("li",{className:ee.li,onClick:function(){return e.logout()}},"Logout"))))}),ne=Object(d.b)(function(e){return{isWaitingTweet:e.app.isWaitingTweet,isWaitingLogin:e.app.isWaitingLogin,isValid:e.app.isValid,previewMode:e.app.previewMode,isLogined:e.app.isLogined,profileImage:e.app.profileImage}},function(e){return{showPopup:function(){var t;e((t=u.a.createElement("div",{style:{position:"fixed",right:"8px",bottom:"50px"}},u.a.createElement(te,null)),{type:T,popupComponent:t}))},tweet:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch(_(!0)),t.dispatch(C()),Q(t.getState().app.mdText,function(e){e.toBlob(function(e){var n=new FormData;n.append("title","#TwitterMD"),n.append("image",e),A.a.post("".concat(Y.apiUrl,"/tweet"),n,{headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then(function(e){e.data.ok?f.toast.info("Tweeted!"):f.toast.error("Woops! Error!"),t.dispatch(_(!1))}).catch(function(e){f.toast.error("Woops! Error!"),t.dispatch(_(!1))})})}),e.abrupt("return",r(n));case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},togglePreview:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dispatch(C()),!(a=t.getState()).app.previewMode){e.next=5;break}return t.dispatch(P()),e.abrupt("return",r(n));case 5:return Q(a.app.mdText,function(e){e.toBlob(function(e){var n;t.dispatch((n=URL.createObjectURL(e),{type:v,url:n})),t.dispatch(P())})}),e.abrupt("return",r(n));case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},savePNG:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch(C()),Q(t.getState().app.mdText,function(e){e.toBlob(function(e){U()(e,"download")})}),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})},login:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y.isBrowser&&!Y.isProd&&t.dispatch(S({isLogined:!0,profileImage:"/icon128.png"})),a="".concat(Y.apiUrl,"/auth/twitter"),chrome&&chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank"),e.abrupt("return",r(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){var t=e.previewMode,n=e.isLogined,r=e.isValid,a=e.isWaitingTweet,o=e.isWaitingLogin,i=e.profileImage,c=e.togglePreview,p=e.savePNG,s=e.tweet,l=e.login,d=e.showPopup;return u.a.createElement("div",{className:"app-footer"},u.a.createElement("button",{className:"btn "+(t?"":"btn-outline"),onClick:function(){return c()}},"Preview"),u.a.createElement("div",{className:"flex-pad"}),u.a.createElement("button",{className:"btn ".concat(r?"":"btn-disabled"),onClick:function(){return p()},disabled:!r},"Save as"),n?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{className:"btn ".concat(r?"":"btn-disabled"," ").concat(a?"btn-wait":""),onClick:function(){return s()},disabled:!r||a},a?"Tweeting":"Tweet"),u.a.createElement("img",{className:"profile-image",src:i,onClick:function(){return d()}})):u.a.createElement("button",{className:"btn",onClick:function(){return!o&&l()}},o?"Checking":"Login"))}),re=Object(d.b)(function(e){return{popupComponent:e.app.popupComponent,isPopupShown:e.app.isPopupShown}},function(e){return{}})(function(e){return e.isPopupShown?u.a.createElement("div",null,e.popupComponent):u.a.createElement("div",null)}),ae=(n(269),n(271),n(273),n(86),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(292),n(294),n(296),n(298),n(300),Object(d.b)(function(e){return{}},function(e){return{checkLogined:function(){e({type:W,asyncHandler:function(){var e=Object(M.a)(N.a.mark(function e(t,n,r){var a,o;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.a.get("".concat(Y.apiUrl,"/check"));case 3:a=e.sent,o=a.data,t.dispatch(S({isLogined:o.logined,profileImage:o.profileImage})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f.toast.error("Woops! Error!");case 11:return t.dispatch({type:E,value:!1}),e.abrupt("return",r(n));case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n,r){return e.apply(this,arguments)}}()})}}})(function(e){return e.checkLogined(),u.a.createElement("div",{className:"app"},u.a.createElement(g,null),u.a.createElement(k,null),u.a.createElement(ne,null),u.a.createElement(f.ToastContainer,{closeButton:!1,className:Object(m.css)({width:"120px !important"}),toastClassName:Object(m.css)({fontSize:"14px",textAlign:"center",width:"120px",height:"35px",minHeight:"35px !important"}),autoClose:3e3,hideProgressBar:!0}),u.a.createElement(re,null))})),oe=n(11),ie=n(7),ce=function(e){return e.length>0},pe={previewMode:!1,previewUrl:"",mdText:"# Title",mdTempText:"# Title",isValid:ce("# Title"),isWaitingTweet:!1,isWaitingLogin:!0,isLogined:!1,profileImage:"",popupComponent:null,isPopupShown:!1};var ue=Object(oe.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var n=e.previewMode;return Object(ie.a)({},e,{previewMode:!n});case v:return Object(ie.a)({},e,{previewUrl:t.url});case w:return Object(ie.a)({},e,{mdText:e.mdTempText});case x:return Object(ie.a)({},e,{mdTempText:t.text,isValid:ce(t.text)});case y:return Object(ie.a)({},e,{isLogined:t.isLogined,profileImage:t.profileImage});case O:return Object(ie.a)({},e,{isWaitingTweet:t.value});case E:return Object(ie.a)({},e,{isWaitingLogin:t.value});case T:return Object(ie.a)({},e,{isPopupShown:!0,popupComponent:t.popupComponent});case j:return Object(ie.a)({},e,{isPopupShown:!1,popupComponent:null});default:return e}}}),se=(Y.isProd?void 0:window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)||oe.d,le=[function(e){return function(t){return function(n){return n.type===W?n.asyncHandler(e,n,t):t(n)}}}],de=Object(oe.e)(ue,se(oe.a.apply(void 0,le))),fe=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return u.a.createElement(d.a,{store:de},u.a.createElement(ae,null))}}]),t}(u.a.Component);l.a.render(u.a.createElement(fe,null),document.getElementById("root"))}});
//# sourceMappingURL=content.js.map