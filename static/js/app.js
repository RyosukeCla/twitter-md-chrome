!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={0:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"===typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/";var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([125,1]),checkDeferredModules()}({125:function(module,exports,__webpack_require__){module.exports=__webpack_require__(362)},319:function(module,exports,__webpack_require__){},323:function(module,exports,__webpack_require__){},347:function(module,exports,__webpack_require__){},349:function(module,exports,__webpack_require__){},355:function(module,exports,__webpack_require__){},360:function(module,exports,__webpack_require__){},362:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var classCallCheck=__webpack_require__(16),createClass=__webpack_require__(17),possibleConstructorReturn=__webpack_require__(19),getPrototypeOf=__webpack_require__(18),inherits=__webpack_require__(20),react=__webpack_require__(0),react_default=__webpack_require__.n(react),react_dom=__webpack_require__(38),react_dom_default=__webpack_require__.n(react_dom),es=__webpack_require__(5),lib=__webpack_require__(13),glamor_lib=__webpack_require__(64);function pathResolve(path){var paths=path.split("/"),suffix=(paths=paths.filter(function(_path){return!("."===_path||""===_path)})).length>0?"/":"";return"/"+paths.join("/")+suffix}var route_Route=Object(es.b)(function mapStateToProps(state){return{currentPath:state.route.currentPath}},function mapDispatchToProps(dispatch){return{}})(function Route(_ref){var currentPath=_ref.currentPath,path=_ref.path,component=_ref.component,_ref$exact=_ref.exact,exact=void 0!==_ref$exact&&_ref$exact,Component=component;path=pathResolve(path),currentPath=pathResolve(currentPath);var regexText="^"+path;return exact&&(regexText+="$"),new RegExp(regexText).test(currentPath)?react_default.a.createElement(Component,{parentPath:path}):""}),taggedTemplateLiteral=__webpack_require__(1),styled_components_browser_esm=__webpack_require__(2),regenerator=__webpack_require__(6),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=__webpack_require__(11),FileSaver_min=__webpack_require__(113),FileSaver_min_default=__webpack_require__.n(FileSaver_min),axios=__webpack_require__(65),axios_default=__webpack_require__.n(axios),TOGGLE_PREVIEW_MODE="TOGGLE_PREVIEW_MODE",SET_PREWVIEW_URL="SET_PREWVIEW_URL",COMMIT_MD_TEMP_TEXT="COMMIT_MD_TEMP_TEXT",SET_MD_TEMP_TEXT="SET_MD_TEMP_TEXT",SET_ACCOUNT="SET_ACCOUNT",SET_WAITING_TWEET="SET_WAITING_TWEET",SET_WAITING_LOGIN="SET_WAITING_LOGIN",SHOW_POPUP="SHOW_POPUP",CLOSE_POPUP="CLOSE_POPUP",npm=__webpack_require__(114),npm_default=__webpack_require__.n(npm),front_matter=__webpack_require__(48),front_matter_default=__webpack_require__.n(front_matter),markdown_it=__webpack_require__(115),markdown_it_default=__webpack_require__.n(markdown_it),markdown_it_katex=__webpack_require__(116),markdown_it_katex_default=__webpack_require__.n(markdown_it_katex),markdown_it_checkbox=__webpack_require__(117),markdown_it_checkbox_default=__webpack_require__.n(markdown_it_checkbox),markdown_it_footnote=__webpack_require__(118),markdown_it_footnote_default=__webpack_require__.n(markdown_it_footnote),markdown_it_deflist=__webpack_require__(119),markdown_it_deflist_default=__webpack_require__.n(markdown_it_deflist),markdown_it_emoji=__webpack_require__(120),markdown_it_emoji_default=__webpack_require__.n(markdown_it_emoji),highlight_pack=__webpack_require__(66),highlight_pack_default=__webpack_require__.n(highlight_pack),md_md=markdown_it_default()({html:!0,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight:function highlight(str,lang){if(lang&&highlight_pack_default.a.getLanguage(lang))try{return highlight_pack_default.a.highlight(lang,str).value}catch(__){}return""}});md_md.use(markdown_it_katex_default.a).use(markdown_it_checkbox_default.a).use(markdown_it_footnote_default.a).use(markdown_it_deflist_default.a).use(markdown_it_emoji_default.a);var utils_md=md_md,src_config={isProd:!0,privacyPolicy:"https://ryosukecla.github.io/policy/",apiUrl:"https://twitter-md.herokuapp.com"};function mdToCanvas(markdown,callback){var content={};try{content=front_matter_default()(markdown)}catch(_){}var rendered=utils_md.render(content.body||markdown),nodes=(new DOMParser).parseFromString(rendered,"text/html").body.childNodes,markdownBody=document.createElement("div");markdownBody.setAttribute("class","markdown-body"),nodes.forEach(function(node){markdownBody.append(node)});var invisible=document.createElement("div");invisible.setAttribute("style","position: fixed; left: -100%; width: 600px;"),invisible.appendChild(markdownBody),document.body.appendChild(invisible),npm_default()(markdownBody,{proxy:"".concat(src_config.apiUrl,"/corsProxy"),useCORS:!0,scale:1.3,logging:!1}).then(function(canvas){callback(canvas),invisible.remove()})}var ASYNC_ACTION="ASYNC_ACTION",HEADER_REGEX=/^\#\ .{1,50}$/gm,LEFT_SHARP=/^\#\ /,TEMP_TITLE_REGEX=/\{\{header\}\}/gm,FM_REGEX=/\{\{fm:[^{}]+\}\}/gm;function processTweetBodyTemplate(template,md){var content;try{content=front_matter_default()(md)}catch(_){content={body:md,attributes:{}}}var props=((template=template.replace(TEMP_TITLE_REGEX,function getTitleFromMd(md){return(md.match(HEADER_REGEX)[0]||"").replace(LEFT_SHARP,"")}(content.body))).match(FM_REGEX)||[]).map(function(fm){return fm.replace("{{fm:","").replace("}}","")}),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=props[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var prop=_step.value,regex=new RegExp("{{fm:".concat(prop,"}}"),"gm");template=template.replace(regex,content.attributes[prop]||"")}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return template.substring(0,130)}function togglePreviewMode(){return{type:TOGGLE_PREVIEW_MODE}}function setPreviewUrl(url){return{type:SET_PREWVIEW_URL,url:url}}function commitMdTempText(){return{type:COMMIT_MD_TEMP_TEXT}}function setAccount(_ref){var isLogined=_ref.isLogined,profileImage=_ref.profileImage;return{type:SET_ACCOUNT,isLogined:isLogined,profileImage:profileImage}}function setWaitingTweet(value){return{type:SET_WAITING_TWEET,value:value}}function action_creaters_showPopup(popupComponent){return{type:SHOW_POPUP,popupComponent:popupComponent}}function action_creaters_closePopup(){return{type:CLOSE_POPUP}}var build=__webpack_require__(121),build_default=__webpack_require__.n(build);function _templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  padding: 0px;\n  margin: 4px 0px;\n"]);return _templateObject=function _templateObject(){return data},data}var atoms_List=styled_components_browser_esm.a.ul(_templateObject());function ListItem_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  list-style: none;\n  padding: 6px 8px;\n  cursor: pointer;\n  font-size: 12px;\n  font-weight: bold;\n\n  ","\n\n  &:hover {\n    background: rgba(240, 240, 240, 1);\n  }\n"]);return ListItem_templateObject=function _templateObject(){return data},data}var atoms_ListItem=styled_components_browser_esm.a.li(ListItem_templateObject(),function(props){return"true"===props.active?"background: rgba(240, 240, 240, 1);":""});function Divider_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  list-style: none;\n  border-bottom: 1px solid #e6ecf0;\n  margin-top: 8px;\n  margin-bottom: 8px;\n"]);return Divider_templateObject=function _templateObject(){return data},data}var atoms_Divider=styled_components_browser_esm.a.li(Divider_templateObject());function _templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  margin-right: 4px;\n"]);return _templateObject2=function _templateObject2(){return data},data}function Dropdown_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  width: 120px;\n  height: auto;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  background: white;\n  border-radius: 4px;\n  border: 1px solid #e6ecf0;\n  box-shadow: 0px 0px 4px 0px rgba(0, 0, 0, 0.1);\n"]);return Dropdown_templateObject=function _templateObject(){return data},data}var Box=styled_components_browser_esm.a.div(Dropdown_templateObject()),Icon=styled_components_browser_esm.a.i(_templateObject2()),components_Dropdown=Object(es.b)(function mapStateToProps(state){return{popupComponent:state.app.popupComponent,isPopupShown:state.app.isPopupShown}},function mapDispatchToProps(dispatch){return{closePopup:function closePopup(){dispatch(action_creaters_closePopup())}}})(function Dropdown(props){var items=props.items||[];return react_default.a.createElement(build_default.a,{onClickOutside:function onClickOutside(){return props.closePopup()}},react_default.a.createElement(Box,null,react_default.a.createElement(atoms_List,null,items.map(function(item){return item.divider?react_default.a.createElement(atoms_Divider,{key:item}):react_default.a.createElement(atoms_ListItem,{onClick:function onClick(e){return item.onClick(e)},key:item.text},item.icon?react_default.a.createElement(Icon,{className:item.icon}):"",item.text)})),props.children))}),objectSpread=__webpack_require__(8),ACTIONS={GOTO:"ROUTE_GOTO"},routeInitialState={currentPath:"/"};var reducer=function route(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:routeInitialState,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case ACTIONS.GOTO:return Object(objectSpread.a)({},state,{currentPath:action.to});default:return Object(objectSpread.a)({},state)}};function action_creaters_goto(to){return{type:ACTIONS.GOTO,to:pathResolve(to)}}function AppDropdown_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  position: fixed;\n  right: 8px;\n  top: 50px;\n"]);return AppDropdown_templateObject2=function _templateObject2(){return data},data}function AppDropdown_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  position: fixed;\n  top: 8px;\n  right: 8px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n"]);return AppDropdown_templateObject=function _templateObject(){return data},data}var CoverIcon=styled_components_browser_esm.a.div(AppDropdown_templateObject()),DropdownContainer=styled_components_browser_esm.a.div(AppDropdown_templateObject2()),components_AppDropdown=Object(es.b)(function mapStateToProps(state){return{popupComponent:state.app.popupComponent,isPopupShown:state.app.isPopupShown}},function mapDispatchToProps(dispatch){return{closePopup:function closePopup(){dispatch(action_creaters_closePopup())},gotoPrivacyPolicy:function gotoPrivacyPolicy(){dispatch(function action_creaters_gotoPrivacyPolicy(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler7=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee7(store,action,next){return regenerator_default.a.wrap(function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return chrome.tabs.create({url:src_config.privacyPolicy}),_context7.abrupt("return",next(action));case 2:case"end":return _context7.stop()}},_callee7,this)}));return function asyncHandler(_x19,_x20,_x21){return _asyncHandler7.apply(this,arguments)}}()}}())},gotoSettingPage:function gotoSettingPage(){dispatch(action_creaters_goto("/settings"))}}})(function AppDropdown(props){return react_default.a.createElement(DropdownContainer,null,react_default.a.createElement(components_Dropdown,{items:[{text:"Settings",onClick:function onClick(){props.gotoSettingPage(),props.closePopup()}},{divider:!0},{text:"Privacy Policy",icon:"fas fa-external-link-alt",onClick:function onClick(){props.gotoPrivacyPolicy()}}]},react_default.a.createElement(CoverIcon,{onClick:props.closePopup})))}),route_Link=Object(es.b)(function mapStateToProps(state){return{currentPath:state.route.currentPath}},function mapDispatchToProps(dispatch){return{goto:function goto(to){dispatch(action_creaters_goto(to))}}})(function Link(props){var currentPath=props.currentPath,to=props.to,exact=props.exact,component=props.component,children=props.children,goto=props.goto,onGoto=props.onGoto,Component=component,regexText="^"+(to=pathResolve(to));exact&&(regexText+="$");var active=new RegExp(regexText).test(currentPath),newProps=Object.assign({},props);return delete newProps.onGoto,react_default.a.createElement(Component,Object.assign({active:active.toString(),onClick:function onClick(){onGoto&&onGoto(to),goto(to)}},newProps),children)});function _templateObject5(){var data=Object(taggedTemplateLiteral.a)(["\n  margin-right: 6px;\n  font-size: 18px;\n  line-height: 26px !important;\n  padding: 0px 4px;\n  cursor: pointer;\n"]);return _templateObject5=function _templateObject5(){return data},data}function _templateObject4(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 3;\n\n  display: flex;\n  justify-content: flex-end;\n"]);return _templateObject4=function _templateObject4(){return data},data}function _templateObject3(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 1;\n"]);return _templateObject3=function _templateObject3(){return data},data}function AppHeader_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 26px;\n  user-select: none;\n  pointer-events: none;\n  grid-row: 1;\n  grid-column: 2;\n"]);return AppHeader_templateObject2=function _templateObject2(){return data},data}function AppHeader_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 26px;\n  line-height: 26px;\n  padding: 8px;\n  text-align: center;\n  font-weight: bold;\n  font-size: 12px;\n  border-bottom: 1px solid #e6ecf0;\n  display: grid;\n  grid-template-columns: 1fr 26px 1fr;\n  grid-template-rows: 1fr;\n"]);return AppHeader_templateObject=function _templateObject(){return data},data}var Header=styled_components_browser_esm.a.div(AppHeader_templateObject()),Brand=styled_components_browser_esm.a.img(AppHeader_templateObject2()),LeftSpace=styled_components_browser_esm.a.div(_templateObject3()),RightSpace=styled_components_browser_esm.a.div(_templateObject4()),IconItem=styled_components_browser_esm.a.i(_templateObject5()),components_AppHeader=Object(es.b)(function mapStateToProps(state){return{}},function mapDispatchToProps(dispatch){return{showPopup:function showPopup(){dispatch(action_creaters_showPopup(react_default.a.createElement(components_AppDropdown,null)))}}})(function AppHeader(_ref){var showPopup=_ref.showPopup;return react_default.a.createElement(Header,null,react_default.a.createElement(LeftSpace,null),react_default.a.createElement(Brand,{src:"/icon128.png"}),react_default.a.createElement(RightSpace,null,react_default.a.createElement(route_Route,{path:"/settings",component:function BackIcon(){return react_default.a.createElement(route_Link,{to:"/",component:IconItem,className:"fas fa-times"})}}),react_default.a.createElement(route_Route,{exact:!0,path:"/",component:function AppDropdownIcon(){return react_default.a.createElement(IconItem,{className:"fas fa-cat",onClick:function onClick(){return showPopup()}})}})))}),CssInject=Object(es.b)(function mapStateToProps(state){return{customCss:state.settings.customCss,tmp:state.settings.tmp}},function mapDispatchToProps(dispatch){return{}})(function SettingList(_ref){var customCss=_ref.customCss,tmp=_ref.tmp,cssInjection="\n    <style>\n      ".concat(tmp.customCss?tmp.customCss:customCss,"\n    </style>\n  ");return react_default.a.createElement("div",{dangerouslySetInnerHTML:{__html:cssInjection}})}),react_codemirror2=__webpack_require__(50),WsBody=Object(es.b)(function mapStateToProps(state){return{previewMode:state.app.previewMode,previewUrl:state.app.previewUrl,initialText:state.app.mdText}},function mapDispatchToProps(dispatch){return{onChange:function onChange(value){dispatch(function setMdTempText(text){return{type:SET_MD_TEMP_TEXT,text:text}}(value))}}})(function AppBody(_ref){var initialText=_ref.initialText,previewMode=_ref.previewMode,previewUrl=_ref.previewUrl,_onChange=_ref.onChange;return previewMode?react_default.a.createElement("div",{className:"preview"},previewUrl?react_default.a.createElement("img",{className:"preview-img",src:previewUrl}):react_default.a.createElement("div",{className:"preview-loading"},react_default.a.createElement("div",{className:"lds-ellipsis"},react_default.a.createElement("div",null),react_default.a.createElement("div",null),react_default.a.createElement("div",null),react_default.a.createElement("div",null)))):react_default.a.createElement("div",null,react_default.a.createElement(react_codemirror2.UnControlled,{value:initialText,options:{mode:"twitterMDMode",theme:"github-light",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!1,tabSize:2},editorDidMount:function editorDidMount(editor){editor.setOption("extraKeys",{Tab:function Tab(cm){var spaces=Array(cm.getOption("indentUnit")+1).join(" ");cm.replaceSelection(spaces)}})},onChange:function onChange(editor,data,value){return _onChange(value)}}))});function AccountDropdown_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  position: fixed;\n  right: 8px;\n  bottom: 50px;\n"]);return AccountDropdown_templateObject2=function _templateObject2(){return data},data}function AccountDropdown_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  position: fixed;\n  bottom: 8px;\n  right: 8px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n"]);return AccountDropdown_templateObject=function _templateObject(){return data},data}var AccountDropdown_CoverIcon=styled_components_browser_esm.a.div(AccountDropdown_templateObject()),AccountDropdown_DropdownContainer=styled_components_browser_esm.a.div(AccountDropdown_templateObject2()),components_AccountDropdown=Object(es.b)(function mapStateToProps(state){return{popupComponent:state.app.popupComponent,isPopupShown:state.app.isPopupShown}},function mapDispatchToProps(dispatch){return{closePopup:function closePopup(){dispatch(action_creaters_closePopup())},logout:function logout(){dispatch(function action_creaters_logout(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler5=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee5(store,action,next){var loginUrl;return regenerator_default.a.wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return loginUrl="".concat(src_config.apiUrl,"/logout"),chrome.tabs.create({url:loginUrl}),store.dispatch(setAccount({isLogined:!1})),_context5.abrupt("return",next(action));case 4:case"end":return _context5.stop()}},_callee5,this)}));return function asyncHandler(_x13,_x14,_x15){return _asyncHandler5.apply(this,arguments)}}()}}())}}})(function AccountDropdown(props){return react_default.a.createElement(AccountDropdown_DropdownContainer,null,react_default.a.createElement(components_Dropdown,{items:[{text:"Logout",onClick:function onClick(){props.logout()}}]},react_default.a.createElement(AccountDropdown_CoverIcon,{onClick:props.closePopup})))}),WsFooter=Object(es.b)(function mapStateToProps(state){return{isWaitingTweet:state.app.isWaitingTweet,isWaitingLogin:state.app.isWaitingLogin,isValid:state.app.isValid,previewMode:state.app.previewMode,isLogined:state.app.isLogined,profileImage:state.app.profileImage}},function mapDispatchToProps(dispatch){return{showPopup:function showPopup(){dispatch(action_creaters_showPopup(react_default.a.createElement(components_AccountDropdown,null)))},tweet:function tweet(){dispatch(function action_creaters_tweet(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler3=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee3(store,action,next){var state;return regenerator_default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return store.dispatch(setWaitingTweet(!0)),store.dispatch(commitMdTempText()),mdToCanvas((state=store.getState()).app.mdText,function(canvas){canvas.toBlob(function(blob){var data=new FormData,title=processTweetBodyTemplate(state.settings.tweetBodyTemplate,state.app.mdText);data.append("title",title),data.append("image",blob),axios_default.a.post("".concat(src_config.apiUrl,"/tweet"),data,{headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then(function(_ref2){_ref2.data.ok?lib.toast.info("Tweeted!"):lib.toast.error("Woops! Error!"),store.dispatch(setWaitingTweet(!1))}).catch(function(err){lib.toast.error("Woops! Error!"),store.dispatch(setWaitingTweet(!1))})})}),_context3.abrupt("return",next(action));case 5:case"end":return _context3.stop()}},_callee3,this)}));return function asyncHandler(_x7,_x8,_x9){return _asyncHandler3.apply(this,arguments)}}()}}())},togglePreview:function togglePreview(){dispatch(function action_creaters_togglePreview(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(store,action,next){var state;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(store.dispatch(commitMdTempText()),!(state=store.getState()).app.previewMode){_context.next=6;break}return store.dispatch(togglePreviewMode()),store.dispatch(setPreviewUrl("")),_context.abrupt("return",next(action));case 6:return store.dispatch(togglePreviewMode()),mdToCanvas(state.app.mdText,function(canvas){canvas.toBlob(function(blob){store.getState().app.previewMode&&store.dispatch(setPreviewUrl(URL.createObjectURL(blob)))})}),_context.abrupt("return",next(action));case 9:case"end":return _context.stop()}},_callee,this)}));return function asyncHandler(_x,_x2,_x3){return _asyncHandler.apply(this,arguments)}}()}}())},savePNG:function savePNG(){dispatch(function saveAs(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler2=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee2(store,action,next){return regenerator_default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return store.dispatch(commitMdTempText()),mdToCanvas(store.getState().app.mdText,function(canvas){canvas.toBlob(function(blob){FileSaver_min_default()(blob,"download")})}),_context2.abrupt("return",next(action));case 4:case"end":return _context2.stop()}},_callee2,this)}));return function asyncHandler(_x4,_x5,_x6){return _asyncHandler2.apply(this,arguments)}}()}}())},login:function login(){dispatch(function action_creaters_login(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler4=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee4(store,action,next){var loginUrl;return regenerator_default.a.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return loginUrl="".concat(src_config.apiUrl,"/auth/twitter"),chrome.tabs.create({url:loginUrl}),_context4.abrupt("return",next(action));case 3:case"end":return _context4.stop()}},_callee4,this)}));return function asyncHandler(_x10,_x11,_x12){return _asyncHandler4.apply(this,arguments)}}()}}())}}})(function AppFooter(_ref){var previewMode=_ref.previewMode,isLogined=_ref.isLogined,isValid=_ref.isValid,isWaitingTweet=_ref.isWaitingTweet,isWaitingLogin=_ref.isWaitingLogin,profileImage=_ref.profileImage,togglePreview=_ref.togglePreview,savePNG=_ref.savePNG,tweet=_ref.tweet,login=_ref.login,showPopup=_ref.showPopup;return react_default.a.createElement("div",{className:"app-footer"},react_default.a.createElement("button",{className:"btn "+(previewMode?"":"btn-outline"),onClick:function onClick(){return togglePreview()}},"Preview"),react_default.a.createElement("div",{className:"flex-pad"}),react_default.a.createElement("button",{className:"btn ".concat(isValid?"":"btn-disabled"),onClick:function onClick(){return savePNG()},disabled:!isValid},"Save as"),isLogined?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("button",{className:"btn ".concat(isValid?"":"btn-disabled"," ").concat(isWaitingTweet?"btn-wait":""),onClick:function onClick(){return tweet()},disabled:!isValid||isWaitingTweet},isWaitingTweet?"Tweeting":"Tweet"),react_default.a.createElement("img",{className:"profile-image",src:profileImage,onClick:function onClick(){return showPopup()}})):react_default.a.createElement("button",{className:"btn",onClick:function onClick(){return!isWaitingLogin&&login()}},isWaitingLogin?"Checking":"Login"))}),pages_Workspace=function Workspace(){return react_default.a.createElement("div",null,react_default.a.createElement(WsBody,null),react_default.a.createElement(WsFooter,null))},defineProperty=__webpack_require__(49),reducer_ACTIONS={SET_ALL_SETTINGS:"SET_ALL_SETTINGS",SET_TEMP_SETTINGS:"SET_TEMP_SETTINGS"},settingsInitialState={customCss:"\n/* centering image */\n.markdown-body img {\n  margin-left: auto;\n  margin-right: auto;\n  display: block;\n}\n",tweetBodyTemplate:"{{header}} #TwitterMD",tmp:{}};var settings_reducer=function reducer_settings(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:settingsInitialState,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case reducer_ACTIONS.SET_ALL_SETTINGS:var _settings=action.settings,newSettings={};return void 0!==_settings.customCss&&(newSettings.customCss=_settings.customCss),void 0!==_settings.tweetBodyTemplate&&(newSettings.tweetBodyTemplate=_settings.tweetBodyTemplate),Object(objectSpread.a)({},state,newSettings);case reducer_ACTIONS.SET_TEMP_SETTINGS:var tmp=action.tmp;return Object(objectSpread.a)({},state,{tmp:tmp||{}});default:return Object(objectSpread.a)({},state)}},SETTING_KEY="settings";function setAllSettings(settings){return{type:reducer_ACTIONS.SET_ALL_SETTINGS,settings:settings}}function setTempSettings(tmp){return{type:reducer_ACTIONS.SET_TEMP_SETTINGS,tmp:tmp}}function action_creaters_commitTmp(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee(store,action,next){var state,tmp;return regenerator_default.a.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return console.log("commit tmp settings"),state=store.getState(),tmp=state.settings.tmp,store.dispatch(setAllSettings(tmp)),store.dispatch(setTempSettings({})),_context.abrupt("return",next(action));case 6:case"end":return _context.stop()}},_callee,this)}));return function asyncHandler(_x,_x2,_x3){return _asyncHandler.apply(this,arguments)}}()}}function SettingList_templateObject4(){var data=Object(taggedTemplateLiteral.a)(["\n  width: 100px;\n"]);return SettingList_templateObject4=function _templateObject4(){return data},data}function SettingList_templateObject3(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 2;\n  grid-column: 1;\n"]);return SettingList_templateObject3=function _templateObject3(){return data},data}function SettingList_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 1;\n"]);return SettingList_templateObject2=function _templateObject2(){return data},data}function SettingList_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 100%;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 1fr 30px;\n"]);return SettingList_templateObject=function _templateObject(){return data},data}var Layout=styled_components_browser_esm.a.div(SettingList_templateObject()),TopSpace=styled_components_browser_esm.a.div(SettingList_templateObject2()),BottomSpace=styled_components_browser_esm.a.div(SettingList_templateObject3()),Button=styled_components_browser_esm.a.button(SettingList_templateObject4()),setting_SettingList=Object(es.b)(function mapStateToProps(state){return{state:state.route.currentPath}},function mapDispatchToProps(dispatch){return{saveAllSettings:function saveAllSettings(){dispatch(action_creaters_commitTmp()),dispatch(function action_creaters_saveAllSettings(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler3=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee3(store,action,next){var state,settings;return regenerator_default.a.wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:console.log("save all settings"),state=store.getState(),(settings=Object.assign({},state.settings)).tmp=void 0,chrome.storage.sync.set(Object(defineProperty.a)({},SETTING_KEY,settings),function(){return lib.toast.info("Saved!"),next(action)});case 5:case"end":return _context3.stop()}},_callee3,this)}));return function asyncHandler(_x7,_x8,_x9){return _asyncHandler3.apply(this,arguments)}}()}}())}}})(function SettingList(_ref){var saveAllSettings=_ref.saveAllSettings;return react_default.a.createElement(Layout,null,react_default.a.createElement(TopSpace,null,react_default.a.createElement(atoms_List,null,react_default.a.createElement(route_Link,{exact:!0,to:"/settings/",component:atoms_ListItem},"Custom css"),react_default.a.createElement(route_Link,{to:"/settings/tweetBody",component:atoms_ListItem},"Tweet body"))),react_default.a.createElement(BottomSpace,null,react_default.a.createElement(Button,{className:"btn",onClick:saveAllSettings},"Save")))});function CustomCss_templateObject3(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 2;\n  overflow: scroll;\n"]);return CustomCss_templateObject3=function _templateObject3(){return data},data}function CustomCss_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 1;\n  border-right: 1px solid #e6ecf0;\n"]);return CustomCss_templateObject2=function _templateObject2(){return data},data}function CustomCss_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 260px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr;\n"]);return CustomCss_templateObject=function _templateObject(){return data},data}var CustomCss_Layout=styled_components_browser_esm.a.div(CustomCss_templateObject()),CustomCss_LeftSpace=styled_components_browser_esm.a.div(CustomCss_templateObject2()),CustomCss_RightSpace=styled_components_browser_esm.a.div(CustomCss_templateObject3()),CustomCss_CustomCss=function(_Component){function CustomCss(){return Object(classCallCheck.a)(this,CustomCss),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(CustomCss).apply(this,arguments))}return Object(inherits.a)(CustomCss,_Component),Object(createClass.a)(CustomCss,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.commitTmp()}},{key:"render",value:function render(){var _this$props=this.props,initialCustomCss=_this$props.initialCustomCss,_onChange=_this$props.onChange,html=utils_md.render("\n# H1\n## H2\n### H3\n#### H4\n##### H5\n###### H6\n\n---\n\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium\n\n---\n\n*italic*\n**bold**\n**_bold and italic_**\n~~scratch~~\n\n---\n\n1. first\n2. second\n3. third\n\n- item\n- item\n  - nest\n    - nest\n\n---\n\n[I'm link](#)\n\n---\n\n![image](/icon48.png)\n\n---\n\n```js\nconst f = x => x\n```\n\n---\n\n| Tables        | Are           |\n| ------------- |:-------------:|\n| col 3 is      | right-aligned |\n| col 2 is      | centered      |\n| zebra stripes | are neat      |\n\n---\n\n> Blockquotes\n\n---\n\n[x] checkbox\n[ ] checkbox\n\n---\n\nFirst Term\n: This is the definition of the first term.\n\n---\n\n$$ f(x) = x $$\n\n---\n\nSome long sentence. [^footnote]\n\n[^footnote]: Test, [Link](#).\n\n");return react_default.a.createElement(CustomCss_Layout,null,react_default.a.createElement(CustomCss_LeftSpace,null,react_default.a.createElement(react_codemirror2.UnControlled,{className:"custom-css-codemirror",value:initialCustomCss,options:{mode:"css",theme:"github-light",lineNumbers:!0,lineWrapping:!0,indentWithTabs:!1,tabSize:2},editorDidMount:function editorDidMount(editor){editor.setOption("extraKeys",{Tab:function Tab(cm){var spaces=Array(cm.getOption("indentUnit")+1).join(" ");cm.replaceSelection(spaces)}})},onChange:function onChange(editor,data,value){return _onChange(value)}})),react_default.a.createElement(CustomCss_RightSpace,null,react_default.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:html}})))}}]),CustomCss}(react.Component),setting_CustomCss=Object(es.b)(function mapStateToProps(state){return{initialCustomCss:state.settings.customCss}},function mapDispatchToProps(dispatch){return{onChange:function onChange(css){dispatch(function onChangeCustomCss(css){return setTempSettings({customCss:css})}(css))},commitTmp:function commitTmp(){dispatch(action_creaters_commitTmp())}}})(CustomCss_CustomCss),bodyTemp_example_md="---\ntitle: Lorem ipsum\n---\n# Lorem ipsum dolor sit amet,\nconsectetur adipiscing elit, sed do eiusmod\n\n## Sed ut perspiciatis unde omnis\niste natus error sit voluptatem accusantium\n";function _templateObject10(){var data=Object(taggedTemplateLiteral.a)(["\n  background: #f5f8fa;\n  padding: 8px;\n  border-radius: 4px;\n  color: rgb(60, 60, 60);\n"]);return _templateObject10=function _templateObject10(){return data},data}function _templateObject9(){var data=Object(taggedTemplateLiteral.a)(["\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  margin: 0;\n  background: #f5f8fa;\n  padding: 8px;\n  border-radius: 4px;\n  color: rgb(60, 60, 60);\n"]);return _templateObject9=function _templateObject9(){return data},data}function _templateObject8(){var data=Object(taggedTemplateLiteral.a)(["\n  border-radius: 4px;\n  margin: 0px;\n  height: 40px;\n  padding: 4px;\n  width: 223px;\n  resize: none;\n  font-size: 12px;\n  font-weight: bold;\n  color: rgb(60, 60, 60);\n\n  border: 1px solid #e6ecf0;\n\n  &:active,\n  &:focus {\n    border: 1px solid #1c94e0;\n  }\n"]);return _templateObject8=function _templateObject8(){return data},data}function _templateObject7(){var data=Object(taggedTemplateLiteral.a)(["\n  font-size: 12px;\n  margin-top: 2px;\n  margin-left: 12px;\n  margin-bottom: 4px;\n"]);return _templateObject7=function _templateObject7(){return data},data}function _templateObject6(){var data=Object(taggedTemplateLiteral.a)(["\n  font-size: 12px;\n  font-weight: bold;\n  font-style: italic;\n"]);return _templateObject6=function _templateObject6(){return data},data}function TweetBody_templateObject5(){var data=Object(taggedTemplateLiteral.a)(["\n  padding-top: 4px;\n  color: rgb(60, 60, 60);\n"]);return TweetBody_templateObject5=function _templateObject5(){return data},data}function TweetBody_templateObject4(){var data=Object(taggedTemplateLiteral.a)(["\n  line-height: 24px;\n"]);return TweetBody_templateObject4=function _templateObject4(){return data},data}function TweetBody_templateObject3(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 2;\n  overflow: scroll;\n  padding: 8px;\n"]);return TweetBody_templateObject3=function _templateObject3(){return data},data}function TweetBody_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 1;\n  border-right: 1px solid #e6ecf0;\n  padding: 8px;\n"]);return TweetBody_templateObject2=function _templateObject2(){return data},data}function TweetBody_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 260px;\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr;\n"]);return TweetBody_templateObject=function _templateObject(){return data},data}var TweetBody_Layout=styled_components_browser_esm.a.div(TweetBody_templateObject()),TweetBody_LeftSpace=styled_components_browser_esm.a.div(TweetBody_templateObject2()),TweetBody_RightSpace=styled_components_browser_esm.a.div(TweetBody_templateObject3()),Label=styled_components_browser_esm.a.label(TweetBody_templateObject4()),Description=styled_components_browser_esm.a.div(TweetBody_templateObject5()),DefName=styled_components_browser_esm.a.div(_templateObject6()),DefDesc=styled_components_browser_esm.a.div(_templateObject7()),Textarea=styled_components_browser_esm.a.textarea(_templateObject8()),PreviewBefore=styled_components_browser_esm.a.pre(_templateObject9()),PreviewAfter=styled_components_browser_esm.a.div(_templateObject10()),TweetBody_TweetBody=function(_Component){function TweetBody(){return Object(classCallCheck.a)(this,TweetBody),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(TweetBody).apply(this,arguments))}return Object(inherits.a)(TweetBody,_Component),Object(createClass.a)(TweetBody,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.commitTmp()}},{key:"render",value:function render(){var _this$props=this.props,tweetBodyTemplate=_this$props.tweetBodyTemplate,_onChange=_this$props.onChange;return react_default.a.createElement(TweetBody_Layout,null,react_default.a.createElement(TweetBody_LeftSpace,null,react_default.a.createElement(Label,null,"Tweet Body Template"),react_default.a.createElement(Textarea,{placeholder:"{{header}} #TwitterMD",value:tweetBodyTemplate,onChange:function onChange(e){return _onChange(e.target.value)}}),react_default.a.createElement(Description,null,react_default.a.createElement(DefName,null,"{{header}}"),react_default.a.createElement(DefDesc,null,"Get top header1 from markdown."),react_default.a.createElement(DefName,null,"{{fm:attr}}"),react_default.a.createElement(DefDesc,null,"Get front matter attribute from markdown. (e.g. ","{{fm:title}}",")"))),react_default.a.createElement(TweetBody_RightSpace,null,react_default.a.createElement(Label,null,"Markdown"),react_default.a.createElement(PreviewBefore,null,bodyTemp_example_md),react_default.a.createElement(Label,null,"Tweet Body"),react_default.a.createElement(PreviewAfter,null,processTweetBodyTemplate(tweetBodyTemplate,bodyTemp_example_md))))}}]),TweetBody}(react.Component),setting_TweetBody=Object(es.b)(function mapStateToProps(state){return{tweetBodyTemplate:state.settings.tmp.tweetBodyTemplate||state.settings.tweetBodyTemplate}},function mapDispatchToProps(dispatch){return{onChange:function onChange(template){dispatch(function onChangeTweetBodyTemplate(template){return setTempSettings({tweetBodyTemplate:template})}(template))},commitTmp:function commitTmp(){dispatch(action_creaters_commitTmp())}}})(TweetBody_TweetBody);function Settings_templateObject3(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 2;\n"]);return Settings_templateObject3=function _templateObject3(){return data},data}function Settings_templateObject2(){var data=Object(taggedTemplateLiteral.a)(["\n  grid-row: 1;\n  grid-column: 1;\n  border-right: 1px solid #e6ecf0;\n"]);return Settings_templateObject2=function _templateObject2(){return data},data}function Settings_templateObject(){var data=Object(taggedTemplateLiteral.a)(["\n  height: 250px;\n  display: grid;\n  grid-template-columns: 110px 1fr;\n  grid-template-rows: 1fr;\n"]);return Settings_templateObject=function _templateObject(){return data},data}var SettingLayout=styled_components_browser_esm.a.div(Settings_templateObject()),Settings_LeftSpace=styled_components_browser_esm.a.div(Settings_templateObject2()),Settings_RightSpace=styled_components_browser_esm.a.div(Settings_templateObject3()),pages_Settings=function Settings(_ref){var parentPath=_ref.parentPath;return react_default.a.createElement(SettingLayout,null,react_default.a.createElement(Settings_LeftSpace,null,react_default.a.createElement(setting_SettingList,null)),react_default.a.createElement(Settings_RightSpace,null,react_default.a.createElement(route_Route,{exact:!0,path:"".concat(parentPath,"/"),component:setting_CustomCss}),react_default.a.createElement(route_Route,{path:"".concat(parentPath,"/tweetBody"),component:setting_TweetBody})))},components_PopupContainer=Object(es.b)(function mapStateToProps(state){return{popupComponent:state.app.popupComponent,isPopupShown:state.app.isPopupShown}},function mapDispatchToProps(dispatch){return{}})(function PopupContainer(props){return props.isPopupShown?react_default.a.createElement("div",{style:{position:"fixed",zIndex:100}},props.popupComponent):react_default.a.createElement("div",null)}),lib_codemirror=(__webpack_require__(319),__webpack_require__(321),__webpack_require__(323),__webpack_require__(109),__webpack_require__(325),__webpack_require__(326),__webpack_require__(327),__webpack_require__(328),__webpack_require__(329),__webpack_require__(330),__webpack_require__(331),__webpack_require__(332),__webpack_require__(333),__webpack_require__(334),__webpack_require__(335),__webpack_require__(336),__webpack_require__(337),__webpack_require__(338),__webpack_require__(342),__webpack_require__(343),__webpack_require__(344),__webpack_require__(345),__webpack_require__(347),__webpack_require__(349),__webpack_require__(351),__webpack_require__(353),__webpack_require__(355),__webpack_require__(357),__webpack_require__(4)),lib_codemirror_default=__webpack_require__.n(lib_codemirror);__webpack_require__(359);lib_codemirror_default.a.defineMode("twitterMDMode",function(config){var texMode=lib_codemirror_default.a.getMode(config,"stex"),mdMode=lib_codemirror_default.a.getMode(config,"gfm"),yamlMode=lib_codemirror_default.a.getMode(config,"yaml");return lib_codemirror_default.a.multiplexingMode(mdMode,{open:"$$",close:"$$",mode:texMode},{open:"$",close:"$",mode:texMode},{open:"---",close:"---",mode:yamlMode})});var App_App=function(_Component){function App(){return Object(classCallCheck.a)(this,App),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(App).apply(this,arguments))}return Object(inherits.a)(App,_Component),Object(createClass.a)(App,[{key:"componentDidMount",value:function componentDidMount(){this.props.checkLogined(),this.props.loadAllSettings()}},{key:"render",value:function render(){return react_default.a.createElement("div",{className:"app"},react_default.a.createElement(components_AppHeader,null),react_default.a.createElement(lib.ToastContainer,{closeButton:!1,className:Object(glamor_lib.css)({width:"120px !important"}),toastClassName:Object(glamor_lib.css)({fontSize:"14px",textAlign:"center",width:"120px",height:"35px",minHeight:"35px !important"}),autoClose:3e3,hideProgressBar:!0}),react_default.a.createElement(components_PopupContainer,null),react_default.a.createElement(route_Route,{exact:!0,path:"/",component:pages_Workspace}),react_default.a.createElement(route_Route,{path:"/settings",component:pages_Settings}),react_default.a.createElement(CssInject,null))}}]),App}(react.Component),src_App=Object(es.b)(function mapStateToProps(state){return{currentPath:state.route.currentPath}},function mapDispatchToProps(dispatch){return{checkLogined:function checkLogined(){dispatch(function action_creaters_checkLogined(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler6=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee6(store,action,next){var _ref3,data;return regenerator_default.a.wrap(function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.prev=0,_context6.next=3,axios_default.a.get("".concat(src_config.apiUrl,"/check"));case 3:_ref3=_context6.sent,data=_ref3.data,store.dispatch(setAccount({isLogined:data.logined,profileImage:data.profileImage})),_context6.next=11;break;case 8:_context6.prev=8,_context6.t0=_context6.catch(0),lib.toast.error("Woops! Error!");case 11:return store.dispatch({type:SET_WAITING_LOGIN,value:!1}),_context6.abrupt("return",next(action));case 13:case"end":return _context6.stop()}},_callee6,this,[[0,8]])}));return function asyncHandler(_x16,_x17,_x18){return _asyncHandler6.apply(this,arguments)}}()}}())},loadAllSettings:function loadAllSettings(){dispatch(function action_creaters_loadAllSettings(){return{type:ASYNC_ACTION,asyncHandler:function(){var _asyncHandler2=Object(asyncToGenerator.a)(regenerator_default.a.mark(function _callee2(store,action,next){return regenerator_default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:chrome.storage.sync.get(SETTING_KEY,function(result){return console.log("load all settings"),store.dispatch(setAllSettings(result.settings||{})),next(action)});case 1:case"end":return _context2.stop()}},_callee2,this)}));return function asyncHandler(_x4,_x5,_x6){return _asyncHandler2.apply(this,arguments)}}()}}())}}})(App_App),redux=__webpack_require__(21),validator=function validator(text){return text.length>0},appInitialState={previewMode:!1,previewUrl:"",mdText:"# Title",mdTempText:"# Title",isValid:validator("# Title"),isWaitingTweet:!1,isWaitingLogin:!0,isLogined:!1,profileImage:"",popupComponent:null,isPopupShown:!1};var app_reducer=function appReducer(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:appInitialState,action=arguments.length>1?arguments[1]:void 0;switch(action.type){case TOGGLE_PREVIEW_MODE:var previewMode=state.previewMode;return Object(objectSpread.a)({},state,{previewMode:!previewMode});case SET_PREWVIEW_URL:return Object(objectSpread.a)({},state,{previewUrl:action.url});case COMMIT_MD_TEMP_TEXT:return Object(objectSpread.a)({},state,{mdText:state.mdTempText});case SET_MD_TEMP_TEXT:return Object(objectSpread.a)({},state,{mdTempText:action.text,isValid:validator(action.text)});case SET_ACCOUNT:return Object(objectSpread.a)({},state,{isLogined:action.isLogined,profileImage:action.profileImage});case SET_WAITING_TWEET:return Object(objectSpread.a)({},state,{isWaitingTweet:action.value});case SET_WAITING_LOGIN:return Object(objectSpread.a)({},state,{isWaitingLogin:action.value});case SHOW_POPUP:return Object(objectSpread.a)({},state,{isPopupShown:!0,popupComponent:action.popupComponent});case CLOSE_POPUP:return Object(objectSpread.a)({},state,{isPopupShown:!1,popupComponent:null});default:return state}},reducers=Object(redux.c)({app:app_reducer,route:reducer,settings:settings_reducer}),composeEnhancers=(src_config.isProd?void 0:window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)||redux.d,middlewares=[function(store){return function(next){return function(action){return action.type===ASYNC_ACTION?action.asyncHandler(store,action,next):next(action)}}}],redux_store=Object(redux.e)(reducers,composeEnhancers(redux.a.apply(void 0,middlewares))),src_Main=(__webpack_require__(360),function(_React$Component){function Main(){return Object(classCallCheck.a)(this,Main),Object(possibleConstructorReturn.a)(this,Object(getPrototypeOf.a)(Main).apply(this,arguments))}return Object(inherits.a)(Main,_React$Component),Object(createClass.a)(Main,[{key:"render",value:function render(){return react_default.a.createElement(es.a,{store:redux_store},react_default.a.createElement(src_App,null))}}]),Main}(react_default.a.Component));react_dom_default.a.render(react_default.a.createElement(src_Main,null),document.getElementById("root"))}});
//# sourceMappingURL=app.js.map